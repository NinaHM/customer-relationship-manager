<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>

	<title>Customer overview</title>
	
</head>

<body>
	<nav class="navbar navbar-dark bg-success">
  		<span class="navbar-brand">
    		CRM - Customer Relationship Manager
  		</span>
	</nav>

	<div class="container">	
		<div class="d-flex justify-content-between align-items-center p-3 my-3 bg-light">
		
			<form class="form-inline">
	    		<button class="btn btn-outline-success" type="button" 
	    			onclick="window.location.href='showForm'; return false;">
	    			Add customer
	   			</button>
	  		</form>
	  		
	  		<form class="form-inline" action="#" th:action="@{/search}" method="get">
		    	<input class="form-control mr-sm-2" type="search" placeholder="Search customer" aria-label="Search" name="searchName"/>
		    	<input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Search"/>
		  	</form>		
		</div>
		
		<div th:if="${param.status != null}">
		 	<div class="alert alert-danger" th:if="${param.status[0] == 'fail'}">
				Something went wrong, please try again.
			</div>
		</div>

		<table class="table">
			<thead class="bg-success text-white">
				<tr>
					<th>First name</th>
					<th>Last name</th>
					<th>E-mail</th>
					<th>Action</th>
				</tr>
			</thead>
			
			<tbody>
				<tr th:each="customer : ${customers}">
					<td th:text="${customer.firstName}"/>
					<td th:text="${customer.lastName}"/>
					<td th:text="${customer.email}"/>
					<td> 
						<a class="text-danger" th:href="@{~/showForm(customerId=${customer.id})}">Update</a>
						|
						<a class="text-danger" th:href="@{~/delete(customerId=${customer.id})}"
							onclick="if (!(confirm('Are you sure you want to delete this customer?'))) return false">Delete</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>